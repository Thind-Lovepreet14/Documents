{"ast":null,"code":"var _jsxFileName = \"/Users/lovepreetthird/Documents/ReactProjects/React_Three/comment-box/client/src/App.js\";\nimport React, { Component } from 'react';\nimport Pusher from 'pusher-js';\nimport axios from 'axios';\nimport './App.css';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: '',\n      newComment: '',\n      comments: []\n    };\n\n    this.updateInput = event => {\n      const _event$target = event.target,\n            name = _event$target.name,\n            value = _event$target.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.postComment = event => {\n      event.preventDefault();\n      const _this$state = this.state,\n            username = _this$state.username,\n            newComment = _this$state.newComment;\n      if (username.trim() === '' || newComment.trim() === '') return;\n      const data = {\n        name: username,\n        text: newComment,\n        votes: 0\n      }; //Insert New Code here\n\n      handleReplyChange = (event, index) => {\n        const newState = Object.assign({}, this.state);\n        const userInput = event.target.value;\n        newState.commentList[index].reply = userInput;\n        this.setState({\n          commentList: newState.commentList\n        });\n      };\n\n      axios.post('http://localhost:5000/comment', data).then(() => {\n        this.setState({\n          username: '',\n          newComment: ''\n        });\n      }).catch(error => console.log(error));\n    };\n\n    this.vote = (id, num) => {\n      axios.post('http://localhost:5000/vote', {\n        id,\n        vote: num\n      });\n    };\n  }\n\n  componentDidMount() {\n    const pusher = new Pusher('6f1be800f23677de029d', {\n      cluster: 'us2',\n      encrypted: true\n    });\n    axios.get('http://localhost:5000').then(({\n      data\n    }) => {\n      this.setState({\n        comments: [...data]\n      });\n    }).catch(error => console.log(error));\n    const channel = pusher.subscribe('comments');\n    channel.bind('new-comment', data => {\n      this.setState(prevState => {\n        const comments = prevState.comments;\n        comments.push(data.comment);\n        return {\n          comments\n        };\n      });\n    });\n    channel.bind('new-vote', data => {\n      let comments = this.state.comments;\n      comments = comments.map(e => {\n        if (e._id === data.doc._id) {\n          return data.doc;\n        }\n\n        return e;\n      });\n      this.setState({\n        comments\n      });\n    });\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          username = _this$state2.username,\n          newComment = _this$state2.newComment,\n          comments = _this$state2.comments,\n          replies = _this$state2.replies;\n    const userComments = comments.map(e => React.createElement(\"article\", {\n      className: \"comment\",\n      key: e._id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"comment-user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, e.name), React.createElement(\"p\", {\n      className: \"comment-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, e.text), React.createElement(\"div\", {\n      className: \"voting\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"vote-buttons\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"upvote\",\n      onClick: () => this.vote(e._id, 1),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Upvote\"), React.createElement(\"button\", {\n      className: \"downvote\",\n      onClick: () => this.vote(e._id, -1),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Downvote\"), React.createElement(\"button\", {\n      onChange: event => this.handleReplyChange(event),\n      value: this.state.commentList.e,\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"votes\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Votes: \", e.votes))));\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"article\", {\n      className: \"post\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"Interesting Video\"), React.createElement(\"iframe\", {\n      title: \"video\",\n      width: \"560\",\n      height: \"315\",\n      src: \"https://www.youtube.com/embed/PC60fAKJiek\",\n      frameborder: \"0\",\n      allow: \"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\",\n      allowfullscreen: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"Leave a comment if you enjoyed the video above\")), React.createElement(\"section\", {\n      className: \"comments-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.postComment,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Name:\"), React.createElement(\"input\", {\n      className: \"username\",\n      name: \"username\",\n      id: \"username\",\n      type: \"name\",\n      value: username,\n      onChange: this.updateInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"new-comment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"Comment:\"), React.createElement(\"textarea\", {\n      className: \"comment\",\n      name: \"newComment\",\n      id: \"new-comment\",\n      value: newComment,\n      onChange: this.updateInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Have your say\"))), React.createElement(\"section\", {\n      className: \"comments-section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, userComments));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/lovepreetthird/Documents/ReactProjects/React_Three/comment-box/client/src/App.js"],"names":["React","Component","Pusher","axios","App","state","username","newComment","comments","updateInput","event","target","name","value","setState","postComment","preventDefault","trim","data","text","votes","handleReplyChange","index","newState","Object","assign","userInput","commentList","reply","post","then","catch","error","console","log","vote","id","num","componentDidMount","pusher","cluster","encrypted","get","channel","subscribe","bind","prevState","push","comment","map","e","_id","doc","render","replies","userComments"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Pusher from 'pusher-js';\nimport axios from 'axios';\nimport './App.css';\n\nclass App extends Component {\n  state = {\n    username: '',\n    newComment: '',\n    comments: [],\n  };\n\n  updateInput = event => {\n    const { name, value } = event.target;\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  postComment = event => {\n    event.preventDefault();\n    const { username, newComment } = this.state;\n    if (username.trim() === '' || newComment.trim() === '') return;\n\n    const data = {\n      name: username,\n      text: newComment,\n      votes: 0,\n    };\n\n    //Insert New Code here\n    handleReplyChange = (event, index) => {\n      const newState = Object.assign({}, this.state);\n      const userInput = event.target.value;\n\n      newState.commentList[index].reply = userInput;\n\n      this.setState({\n        commentList: newState.commentList\n      })\n    }\n\n    axios\n      .post('http://localhost:5000/comment', data)\n      .then(() => {\n        this.setState({\n          username: '',\n          newComment: '',\n        });\n      })\n      .catch(error => console.log(error));\n  };\n\n  vote = (id, num) => {\n    axios.post('http://localhost:5000/vote', {\n      id,\n      vote: num,\n    });\n  };\n\n  componentDidMount() {\n    const pusher = new Pusher('6f1be800f23677de029d', {\n      cluster: 'us2',\n      encrypted: true,\n    });\n\n    axios\n      .get('http://localhost:5000')\n      .then(({ data }) => {\n        this.setState({\n          comments: [...data],\n        });\n      })\n      .catch(error => console.log(error));\n\n    const channel = pusher.subscribe('comments');\n    channel.bind('new-comment', data => {\n      this.setState(prevState => {\n        const { comments } = prevState;\n        comments.push(data.comment);\n\n        return {\n          comments,\n        };\n      });\n    });\n\n    channel.bind('new-vote', data => {\n      let { comments } = this.state;\n      comments = comments.map(e => {\n        if (e._id === data.doc._id) {\n          return data.doc;\n        }\n\n        return e;\n      });\n\n      this.setState({\n        comments,\n      });\n    });\n  }\n\n  render() {\n    const { username, newComment, comments, replies } = this.state;\n\n    const userComments = comments.map(e => (\n      <article className=\"comment\" key={e._id}>\n        <h1 className=\"comment-user\">{e.name}</h1>\n        <p className=\"comment-text\">{e.text}</p>\n        <div className=\"voting\">\n          <div className=\"vote-buttons\">\n            <button className=\"upvote\" onClick={() => this.vote(e._id, 1)}>\n              Upvote\n            </button>\n            <button className=\"downvote\" onClick={() => this.vote(e._id, -1)}>\n              Downvote\n            </button>\n            <button onChange={(event) =>this.handleReplyChange(event)} value={this.state.commentList.e} type=\"text\"></button>\n          </div>\n          <div className=\"votes\">Votes: {e.votes}</div>\n        </div>\n      </article>\n    ));\n\n    return (\n      <div className=\"App\">\n        <article className=\"post\">\n          <h1>Interesting Video</h1>\n          <iframe\n            title=\"video\"\n            width=\"560\"\n            height=\"315\"\n            src=\"https://www.youtube.com/embed/PC60fAKJiek\"\n            frameborder=\"0\"\n            allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n            allowfullscreen\n          />\n          <p>Leave a comment if you enjoyed the video above</p>\n        </article>\n        <section className=\"comments-form\">\n          <form onSubmit={this.postComment}>\n            <label htmlFor=\"username\">Name:</label>\n            <input\n              className=\"username\"\n              name=\"username\"\n              id=\"username\"\n              type=\"name\"\n              value={username}\n              onChange={this.updateInput}\n            />\n\n            <label htmlFor=\"new-comment\">Comment:</label>\n            <textarea\n              className=\"comment\"\n              name=\"newComment\"\n              id=\"new-comment\"\n              value={newComment}\n              onChange={this.updateInput}\n            />\n            <button type=\"submit\">Have your say</button>\n          </form>\n        </section>\n        <section className=\"comments-section\">{userComments}</section>\n      </div>\n    );\n  }\n}\n\nexport default App;\n\n"]},"metadata":{},"sourceType":"module"}